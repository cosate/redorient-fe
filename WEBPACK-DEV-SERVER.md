# è§£å†³ "Invalid Host header" é—®é¢˜

## ğŸ› é—®é¢˜æè¿°

ä½¿ç”¨åŸŸåè®¿é—® webpack-dev-server æ—¶å‡ºç° `Invalid Host header` é”™è¯¯ã€‚

## ğŸ” åŸå› 

Webpack-dev-server é»˜è®¤å¯ç”¨äº† Host å¤´æ£€æŸ¥ï¼Œä½œä¸ºå®‰å…¨æªæ–½é˜²æ­¢ DNS rebinding æ”»å‡»ã€‚å½“ä½¿ç”¨åŸŸåè®¿é—®æ—¶ï¼Œå¦‚æœåŸŸåä¸åœ¨ç™½åå•ä¸­ï¼Œå°±ä¼šè¢«æ‹’ç»ã€‚

## âœ… è§£å†³æ–¹æ¡ˆ

å·²åœ¨ `webpack.config.cjs` ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```javascript
devServer: {
  static: {
    directory: path.join(__dirname, 'dist')
  },
  compress: true,
  port: 9000,
  host: '0.0.0.0',        // âœ… ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£
  allowedHosts: 'all',    // âœ… å…è®¸æ‰€æœ‰åŸŸåè®¿é—®
  client: {
    webSocketURL: 'auto://0.0.0.0:0/ws'  // âœ… æ”¯æŒçƒ­æ›´æ–°
  }
}
```

### é…ç½®è¯´æ˜

- **`host: '0.0.0.0'`**: å…è®¸æœåŠ¡å™¨ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼Œè€Œä¸ä»…ä»…æ˜¯ localhost
- **`allowedHosts: 'all'`**: å…è®¸ä»»ä½•åŸŸåè®¿é—®ï¼ˆå¼€å‘ç¯å¢ƒé€‚ç”¨ï¼‰
- **`client.webSocketURL`**: ç¡®ä¿ WebSocket è¿æ¥ï¼ˆçƒ­æ›´æ–°ï¼‰ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ

## ğŸ”’ ç”Ÿäº§ç¯å¢ƒå»ºè®®

å¦‚æœåœ¨ç”Ÿäº§ç¯å¢ƒæˆ–éœ€è¦æ›´ä¸¥æ ¼çš„å®‰å…¨æ§åˆ¶ï¼Œä½¿ç”¨ç‰¹å®šåŸŸåç™½åå•ï¼š

```javascript
devServer: {
  // ... å…¶ä»–é…ç½®
  allowedHosts: [
    'redorient.cn',
    '.redorient.cn',  // æ”¯æŒæ‰€æœ‰å­åŸŸå
    'localhost',
    '127.0.0.1'
  ]
}
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. é‡å¯å¼€å‘æœåŠ¡å™¨

```bash
# åœæ­¢å½“å‰æœåŠ¡ï¼ˆå¦‚æœæ­£åœ¨è¿è¡Œï¼‰
# Ctrl+C æˆ–
npm run dev  # é‡æ–°å¯åŠ¨
```

### 2. è®¿é—®æ–¹å¼

ç°åœ¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»»æ„æ–¹å¼è®¿é—®ï¼š

- âœ… `http://localhost:9000`
- âœ… `http://å…¬ç½‘IP:9000`
- âœ… `http://redorient.cn:9000`
- âœ… `http://ä»»æ„è§£æåˆ°è¯¥æœåŠ¡å™¨çš„åŸŸå:9000`

## ğŸ”¥ çƒ­æ›´æ–°æ”¯æŒ

é…ç½®äº† `client.webSocketURL` åï¼Œå³ä½¿ä½¿ç”¨åŸŸåè®¿é—®ï¼Œçƒ­æ›´æ–°ï¼ˆHMRï¼‰åŠŸèƒ½ä»ç„¶å¯ä»¥æ­£å¸¸å·¥ä½œã€‚

## âš ï¸ å®‰å…¨æç¤º

### å¼€å‘ç¯å¢ƒ
ä½¿ç”¨ `allowedHosts: 'all'` æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºï¼š
- åªåœ¨æœ¬åœ°å¼€å‘æ—¶ä½¿ç”¨
- webpack-dev-server æœ¬èº«å°±æ ‡æ˜æ˜¯å¼€å‘å·¥å…·ï¼Œä¸åº”ç”¨äºç”Ÿäº§

### ç”Ÿäº§ç¯å¢ƒ
- âŒ **ä¸è¦**åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ webpack-dev-server
- âœ… **åº”è¯¥**ä½¿ç”¨ `npm run build:web` æ„å»ºé™æ€æ–‡ä»¶
- âœ… **åº”è¯¥**ä½¿ç”¨ nginx ç­‰ç”Ÿäº§çº§æœåŠ¡å™¨éƒ¨ç½²

## ğŸ“ ç›¸å…³æ–‡æ¡£

- [Webpack Dev Server - allowedHosts](https://webpack.js.org/configuration/dev-server/#devserverallowedhosts)
- [DNS Rebinding æ”»å‡»è§£é‡Š](https://en.wikipedia.org/wiki/DNS_rebinding)

## ğŸ¯ å·²å®Œæˆ

- âœ… ä¿®æ”¹ `webpack.config.cjs`
- âœ… æ·»åŠ  `host: '0.0.0.0'`
- âœ… æ·»åŠ  `allowedHosts: 'all'`
- âœ… é…ç½® WebSocket URL æ”¯æŒçƒ­æ›´æ–°
- âœ… é‡å¯å¼€å‘æœåŠ¡å™¨

ç°åœ¨æ‚¨å¯ä»¥ä½¿ç”¨ `http://redorient.cn:9000` æ­£å¸¸è®¿é—®äº†ï¼ğŸ‰
